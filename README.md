ğŸ§  Local Data Center Automation

Fully Automated Infrastructure Simulation on RHEL 9










ğŸ“‘ Table of Contents

Overview

Goal

Tech Stack

Target Environment

Project Structure

Implementation Progress

Health Check Script

Current Status

Issues & Troubleshooting

Results

Next Steps

Author Notes

ğŸ“˜ Overview

This project automates the creation and configuration of a small, realistic data center environment, running entirely on a local RHEL 9 virtual machine.
It demonstrates a complete automation workflow using Terraform, Ansible, Bash, and optionally PowerShell.

ğŸ¯ Goal

To simulate a self-contained data center, using open-source DevOps tools for provisioning, configuration management, and orchestration â€” all running locally without any cloud dependencies.

ğŸ§± Tech Stack
Tool	Purpose
Terraform	Provision virtual machines locally using the Libvirt provider
Ansible	Configure and manage services on provisioned VMs
Bash	Automate workflow orchestration and validation
PowerShell (optional)	Provide cross-platform status reporting
Libvirt / QEMU-KVM	Underlying local virtualization infrastructure
ğŸ—ï¸ Target Environment
VM Name	Role	OS	Function
dc-web01	Web Server	Rocky/RHEL	Nginx or Apache
dc-db01	Database Server	Rocky/RHEL	MariaDB or PostgreSQL
dc-mon01	Monitoring Server	Rocky/RHEL	Prometheus + Node Exporter
ğŸ“‚ Project Structure
local-datacenter-automation/
â”œâ”€â”€ terraform/
â”‚   â”œâ”€â”€ main.tf
â”‚   â”œâ”€â”€ variables.tf
â”‚   â”œâ”€â”€ outputs.tf
â”‚   â””â”€â”€ provider.tf
â”‚
â”œâ”€â”€ ansible/
â”‚   â”œâ”€â”€ inventory.ini           # Auto-generated by Bash
â”‚   â”œâ”€â”€ playbooks/
â”‚   â”‚   â”œâ”€â”€ webserver.yml
â”‚   â”‚   â”œâ”€â”€ database.yml
â”‚   â”‚   â””â”€â”€ monitoring.yml
â”‚   â””â”€â”€ roles/
â”‚       â”œâ”€â”€ web/
â”‚       â”œâ”€â”€ db/
â”‚       â””â”€â”€ monitoring/
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ deploy.sh               # Main Bash orchestrator
â”‚   â”œâ”€â”€ destroy.sh              # Teardown script
â”‚   â””â”€â”€ report.ps1              # Optional PowerShell report
â”‚
â”œâ”€â”€ healthcheck.sh              # System setup and dependency validator
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md

âš™ï¸ Step-by-Step Implementation Progress
âœ… Step 1: Environment Setup

Installed base virtualization packages and DevOps tools:

sudo dnf install -y qemu-kvm libvirt libvirt-daemon libvirt-daemon-system virt-install
sudo systemctl enable --now libvirtd
sudo dnf install -y ansible wget unzip
wget https://releases.hashicorp.com/terraform/1.9.8/terraform_1.9.8_linux_amd64.zip
sudo unzip terraform_1.9.8_linux_amd64.zip -d /usr/local/bin/

ğŸ§© Health Check Script

The healthcheck.sh script ensures your system is fully ready before deployment.

Key Features

Verifies all dependencies (Terraform, Ansible, Libvirt, etc.)

Installs missing components automatically

Ensures libvirtd is active and accessible

Adds the user to the required groups (libvirt, kvm)

Validates virsh connectivity

Logs all results with timestamps

Run Command
chmod +x healthcheck.sh
./healthcheck.sh | tee logs/healthcheck_$(date +%F).log

Example Output
âœ… Terraform already installed: Terraform v1.9.8
âœ… Ansible already installed: ansible [core 2.14.18]
âœ… libvirtd service is active.
âœ… virsh is communicating with libvirt successfully.

ğŸ“Š Current Status
Component	Status	Notes
Terraform	âœ… Installed (v1.9.8)	Verified operational
Ansible	âœ… Installed	Verified operational
Libvirt/QEMU-KVM	âœ… Running	Service active and verified
Project Directory	âœ… Created	/root/local-datacenter-automation
GitHub Repository	âœ… Configured	Repo successfully linked and ready for pushes
ğŸ§° Issues & Troubleshooting
Issue	Root Cause	Resolution
bridge-utils not found in DNF	Deprecated in RHEL 9	Replaced with network-scripts or configured via nmcli
virsh failed to connect	libvirtd service inactive post-install	Enabled with sudo systemctl enable --now libvirtd
User missing from kvm group	Default group membership missing	Script adds user and displays reminder to re-login
ğŸ“ˆ Results (So Far)

âœ… Local environment validated and operational

âœ… Terraform & Ansible verified on RHEL 9

âœ… Libvirt communication confirmed (virsh list --all)

âœ… GitHub repository initialized and synchronized

âœ… Logging integrated for reproducibility (logs/healthcheck_<date>.log)

ğŸš€ Next Steps

Develop Terraform configurations (provider.tf, main.tf)

Output dynamic Ansible inventory from Terraform

Write playbooks for web, database, and monitoring roles

Implement the deploy.sh orchestration workflow

Add PowerShell reporting (report.ps1)

Update README with architecture diagram and deployment output

âœï¸ Author Notes

This README is designed to evolve as the project grows.
Each iteration will document:

Implementation changes

Problems encountered and their resolutions

Observed results and optimizations

â€œAutomation without documentation is half a job done.â€ â€“ Project Principle
