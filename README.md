🧠 Local Data Center Automation

Fully Automated Infrastructure Simulation on RHEL 9










📑 Table of Contents

Overview

Goal

Tech Stack

Target Environment

Project Structure

Implementation Progress

Health Check Script

Current Status

Issues & Troubleshooting

Results

Next Steps

Author Notes

📘 Overview

This project automates the creation and configuration of a small, realistic data center environment, running entirely on a local RHEL 9 virtual machine.
It demonstrates a complete automation workflow using Terraform, Ansible, Bash, and optionally PowerShell.

🎯 Goal

To simulate a self-contained data center, using open-source DevOps tools for provisioning, configuration management, and orchestration — all running locally without any cloud dependencies.

🧱 Tech Stack
Tool	Purpose
Terraform	Provision virtual machines locally using the Libvirt provider
Ansible	Configure and manage services on provisioned VMs
Bash	Automate workflow orchestration and validation
PowerShell (optional)	Provide cross-platform status reporting
Libvirt / QEMU-KVM	Underlying local virtualization infrastructure
🏗️ Target Environment
VM Name	Role	OS	Function
dc-web01	Web Server	Rocky/RHEL	Nginx or Apache
dc-db01	Database Server	Rocky/RHEL	MariaDB or PostgreSQL
dc-mon01	Monitoring Server	Rocky/RHEL	Prometheus + Node Exporter
📂 Project Structure
local-datacenter-automation/
├── terraform/
│   ├── main.tf
│   ├── variables.tf
│   ├── outputs.tf
│   └── provider.tf
│
├── ansible/
│   ├── inventory.ini           # Auto-generated by Bash
│   ├── playbooks/
│   │   ├── webserver.yml
│   │   ├── database.yml
│   │   └── monitoring.yml
│   └── roles/
│       ├── web/
│       ├── db/
│       └── monitoring/
│
├── scripts/
│   ├── deploy.sh               # Main Bash orchestrator
│   ├── destroy.sh              # Teardown script
│   └── report.ps1              # Optional PowerShell report
│
├── healthcheck.sh              # System setup and dependency validator
├── .gitignore
└── README.md

⚙️ Step-by-Step Implementation Progress
✅ Step 1: Environment Setup

Installed base virtualization packages and DevOps tools:

sudo dnf install -y qemu-kvm libvirt libvirt-daemon libvirt-daemon-system virt-install
sudo systemctl enable --now libvirtd
sudo dnf install -y ansible wget unzip
wget https://releases.hashicorp.com/terraform/1.9.8/terraform_1.9.8_linux_amd64.zip
sudo unzip terraform_1.9.8_linux_amd64.zip -d /usr/local/bin/

🧩 Health Check Script

The healthcheck.sh script ensures your system is fully ready before deployment.

Key Features

Verifies all dependencies (Terraform, Ansible, Libvirt, etc.)

Installs missing components automatically

Ensures libvirtd is active and accessible

Adds the user to the required groups (libvirt, kvm)

Validates virsh connectivity

Logs all results with timestamps

Run Command
chmod +x healthcheck.sh
./healthcheck.sh | tee logs/healthcheck_$(date +%F).log

Example Output
✅ Terraform already installed: Terraform v1.9.8
✅ Ansible already installed: ansible [core 2.14.18]
✅ libvirtd service is active.
✅ virsh is communicating with libvirt successfully.

📊 Current Status
Component	Status	Notes
Terraform	✅ Installed (v1.9.8)	Verified operational
Ansible	✅ Installed	Verified operational
Libvirt/QEMU-KVM	✅ Running	Service active and verified
Project Directory	✅ Created	/root/local-datacenter-automation
GitHub Repository	✅ Configured	Repo successfully linked and ready for pushes
🧰 Issues & Troubleshooting
Issue	Root Cause	Resolution
bridge-utils not found in DNF	Deprecated in RHEL 9	Replaced with network-scripts or configured via nmcli
virsh failed to connect	libvirtd service inactive post-install	Enabled with sudo systemctl enable --now libvirtd
User missing from kvm group	Default group membership missing	Script adds user and displays reminder to re-login
📈 Results (So Far)

✅ Local environment validated and operational

✅ Terraform & Ansible verified on RHEL 9

✅ Libvirt communication confirmed (virsh list --all)

✅ GitHub repository initialized and synchronized

✅ Logging integrated for reproducibility (logs/healthcheck_<date>.log)

🚀 Next Steps

Develop Terraform configurations (provider.tf, main.tf)

Output dynamic Ansible inventory from Terraform

Write playbooks for web, database, and monitoring roles

Implement the deploy.sh orchestration workflow

Add PowerShell reporting (report.ps1)

Update README with architecture diagram and deployment output

✍️ Author Notes

This README is designed to evolve as the project grows.
Each iteration will document:

Implementation changes

Problems encountered and their resolutions

Observed results and optimizations

“Automation without documentation is half a job done.” – Project Principle
